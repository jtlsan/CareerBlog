{% extends 'home/layout.html' %}

{% block header %}
    {% load static %}
    <link href="{% static 'css/post_list.css' %}" type="text/css" rel="stylesheet">
    <!--

        <link href="{% static 'css/bootstrap.min.css' %}" type="text/css" rel="stylesheet">
        <script src="{% static 'js/bootstrap.min.js' %}"></script>
        <script src="{% static 'js/simple-bootstrap-paginator.js' %}"></script>
    -->
    <script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'js/infinite.min.js' %}"></script>
    <script src="{% static 'js/post_list.js' %}"></script>
    <title>Mountain's 개발 블로그</title>
{% endblock %}
{% block content %}
    <div id="page_title">
        <h2>{{ title }}</h2>
        <p>{{ post_count }}개의 글</p>
        {% if user.is_authenticated %}
            <a id="post_button" href="{% url 'home:post_create' %}">
                <img src="{% static 'images/pencil2.svg' %}" id="pencil_icon">
                글 쓰기
            </a>
        {% endif %}
    </div>
    <div class="content"> 
        <section>
            <ul class="infinite-container grid-post">       
                    {% for post in post_list %}
                        <div class="infinite-item">
                            <li class="list-raw">
                                <p id="category">{{ post.category }}</p>
                                <a href="{{ post.get_absolute_url }}" id="detail_link">
                                    <h2 id="post-title">{{ post.title }}</h2>
                                </a>
                                <p id="date">{{ post.created_date|date:"Y.m.d" }}</p>
                            </li>
                        </div>
                    {% endfor %}              
            </ul>      
            {% if post_list.has_next %}
                <a class="infinite-more-link" href="?page={{ post_list.next_page_number }}" style="visibility: hidden">More</a>
            {% endif %}

            <div class="loading" style="display: none;">
                <h2>Loading...</h2>
            </div>
        </section>
    </div>
    <script>
        var infinite = new Waypoint.Infinite({
            element: $('.infinite-container')[0],
            onBeforePageLoad: function() {
                $('.loading').show();
            },
            onAfterPageLoad: function ($items) {
                $('.loading').hide();
            }
        });
    </script>


{% endblock %}
